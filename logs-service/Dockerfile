FROM node:12.2.0-alpine

WORKDIR /usr/src/app

COPY package*.json ./

RUN npm install

COPY . .
ENV SV_HISTORY_HOST=${SV_HISTORY_HOST}
ENV SV_HISTORY_PORT=${SV_HISTORY_PORT}
ENV LOGS_SERVICE_PORT=${LOGS_SERVICE_PORT}
ENV PORT=5000
ENV REDIS_HOST=redis_1
ENV REDIS_PORT=${REDIS_PORT}

# EXPOSE ${LOGS_SERVICE_PORT}
EXPOSE ${PORT}

CMD [ "npm", "start" ]